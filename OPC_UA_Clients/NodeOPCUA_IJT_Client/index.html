<!DOCTYPE html>
<HTML lang='en'>

<head>
  <meta charset='UTF-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <title>OPC UA IJT Demo</title>
  <link rel='stylesheet' type='text/css' href='nodeStyle.css'>
</head>

<link rel='icon' type='image/png' href='../Resources/trussIcon.png' />

<body>
  <script type="importmap">
    {
      "imports": {
        "ijt-support/": "/Javascripts/ijt-support/",
        "views/": "/Javascripts/Views/"
      }
    }
    </script>

  <script src='/socket.io/socket.io.js'></script>

  <script type='module'>

    import {  AddressSpace, 
              AssetManager, 
              MethodManager, 
              EventManager, 
              ResultManager, 
              ModelManager, 
              SocketHandler} from 'ijt-support/ijt-support.mjs'

    import ServerGraphics from 'views/Servers/ServerGraphics.mjs'
    import TabGenerator   from 'views/GraphicSupport/TabGenerator.mjs'
    import EndpointGraphics   from 'views/Servers/EndpointGraphics.mjs'

    

    // Set up essentials
    var socket = io()
    
    const baseDiv = document.createElement('div')
    baseDiv.classList.add('startScreen')
    document.body.appendChild(baseDiv)
    const tabGenerator = new TabGenerator(baseDiv, 'topLevelTabSelector')
    
    /* oncreate, subscribed, tighteningsystem
    function setUpCoordinator(state) {
      tabGenerator.setState(state) // This takes care of activating the web pages at the right stage

    } */

    const servers = new ServerGraphics(socket, tabGenerator)
    tabGenerator.generateTab(servers)

    /*
    let wind = new EndpointGraphics('O-Windows')
    wind.instantiate('opc.tcp://10.46.19.106:40451', socket)
    tabGenerator.generateTab(wind, true)
  
    let ixb = new EndpointGraphics('O-IXB')
    ixb.instantiate('opc.tcp://10.46.16.68:40451', socket)
    tabGenerator.generateTab(ixb, false)
*/


    //setUpCoordinator('oncreate') // Set up all tabs that do not have any advanced dependencies
  </script>
</body>

</html>